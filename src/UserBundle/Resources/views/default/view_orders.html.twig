{% extends 'base.html.twig' %}
{% use 'templates/menu.html.twig' %}

{% block body %}
	
	<div>Historique de vos commandes</div>

	<table class="table table-striped">
		<thead>
			<tr>
				<th>Acheté le : </th>
				<th>Voiture de location</th>
				<th>Prix</th>
				<th>Début</th>
				<th>Fin supposée</th>
				<th>Fin réelle</th>
				<th>Fiche technique</th>
				<th>Facture</th>
			</tr>
		</thead>
		<tbody>
			{% for b in app.user.bills %}
			<tr>
				<td>{{ b.datePayment|date('d M Y H:i') }}</td>
				<td>{{ b.offer.vehicle.brand ~ " " ~ b.offer.vehicle.model ~ " " ~ b.offer.vehicle.color }}</td>
				<td>{{ b.amount ~ " € " }}</td>
				<td>{{ b.offer.dateBegin|date('d M Y H:i') }}</td>
				<td>{{ b.offer.dateEnd|date('d M Y H:i') }}</td>
				{% if "ago" in b.offer.dateEnd|time_diff(b.dateReturn) %}
					<td><div style="background-color:red">{{ b.dateReturn|date('d M Y H:i') }}</div></td>
				{% else %}
					<td><div style="background-color:green">{{ b.dateReturn|date('d M Y H:i') }}</div></td>
				{% endif %}
				<td><a href="{{ path('view_vehicle', {id: b.offer.vehicle.id}) }}"><i class="fa fa-wrench" aria-hidden="true"></i></a></td>
				<td><a href="{{ path('create_bill', {id: b.offer.bill.id }) }}">Générer facture</a></td>

			</tr>
			{% endfor %}
		</tbody>
	</table>
	
{% endblock %}